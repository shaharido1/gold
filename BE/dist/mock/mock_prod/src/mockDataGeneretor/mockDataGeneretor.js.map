{"version":3,"file":"mockDataGeneretor.js","sourceRoot":"","sources":["../../../../../mock/mock_prod/src/mockDataGeneretor/mockDataGeneretor.ts"],"names":[],"mappings":";;AAAA,+BAA0B;AAE1B,sCAAwC;AAExC;IAIU,MAAM,CAAC,WAAW,CAAC,WAAW;QACpC,IAAI,CAAC,GAAG,CAAC,CAAC;QACV,MAAM,QAAQ,GAAwB,EAAE,CAAC;QACzC,OAAO,CAAC,GAAG,WAAW,EAAE;YACtB,MAAM,GAAG,GAAG,EAAE,OAAO,EAAE,MAAM,CAAC,EAAE,EAAE,EAAE,EAAE,SAAE,EAAE,EAAE,CAAC;YAC7C,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;YACnB,CAAC,EAAE,CAAC;SACL;QACD,OAAO,iBAAiB,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;IACtD,CAAC;IAEO,MAAM,CAAC,gBAAgB,CAAC,OAAmB;QACjD,MAAM,EAAE,GAAG;YACT,OAAO;YACP,WAAW,EAAE,IAAI,IAAI,EAAE,CAAC,OAAO,EAAE;SAClC,CAAC;QAEF,OAAO,IAAI,CAAC,SAAS,CAAC,EAAE,CAAC,CAAC;IAC5B,CAAC;IAGM,gBAAgB,CAAC,YAAoB,EAAE,WAAmB;QAC/D,IAAI,QAAQ,GAAG,CAAC,CAAC;QACjB,IAAI,CAAC,kBAAkB,EAAE,CAAC;QAC1B,OAAO,IAAI,kBAAU,CAAC,QAAQ,CAAC,EAAE;YAC/B,IAAI,CAAC,QAAQ,GAAG,WAAW,CAAC,GAAG,EAAE;gBAC/B,IAAI,EAAE,QAAQ,KAAK,YAAY,EAAE;oBAC/B,IAAI,CAAC,kBAAkB,EAAE,CAAC;iBAC3B;gBACD,MAAM,KAAK,GAAG,iBAAiB,CAAC,WAAW,CAAC,WAAW,CAAC,CAAC;gBACzD,sBAAsB;gBACtB,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;gBACrB,2CAA2C;YAC7C,CAAC,EAAE,IAAI,CAAC,CAAC;QACX,CAAC,CAAC,CAAC;IACL,CAAC;IAEM,kBAAkB;QACvB,IAAI,IAAI,CAAC,QAAQ,EAAE;YACjB,aAAa,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAA;SAC7B;IACH,CAAC;CAEF;AA/CD,8CA+CC","sourcesContent":["import { v4 } from 'uuid';\r\nimport { MockDataType } from './mockDataType';\r\nimport { Observable } from 'rxjs/index';\r\n\r\nexport class MockDataGenerator {\r\n  private interval: any;\r\n\r\n\r\n  private static createBatch(batchNumber): string {\r\n    let i = 0;\r\n    const mockData: Array<MockDataType> = [];\r\n    while (i < batchNumber) {\r\n      const msg = { message: `ms-${i}`, id: v4() };\r\n      mockData.push(msg);\r\n      i++;\r\n    }\r\n    return MockDataGenerator.stringifyMessage(mockData);\r\n  }\r\n\r\n  private static stringifyMessage(message: Array<any>): string {\r\n    const js = {\r\n      message,\r\n      rabbitStart: new Date().getTime()\r\n    };\r\n\r\n    return JSON.stringify(js);\r\n  }\r\n\r\n\r\n  public generateMockData(timeToRepeat: number, batchNumber: number): Observable<any> {\r\n    let repeated = 0;\r\n    this.killSourceMockData();\r\n    return new Observable(observer => {\r\n      this.interval = setInterval(() => {\r\n        if (++repeated === timeToRepeat) {\r\n          this.killSourceMockData();\r\n        }\r\n        const batch = MockDataGenerator.createBatch(batchNumber);\r\n        // console.log(batch);\r\n        observer.next(batch);\r\n        // }, this.config.config_batchNumber / 10);\r\n      }, 2000);\r\n    });\r\n  }\r\n\r\n  public killSourceMockData() {\r\n    if (this.interval) {\r\n      clearInterval(this.interval)\r\n    }\r\n  }\r\n\r\n}"]}