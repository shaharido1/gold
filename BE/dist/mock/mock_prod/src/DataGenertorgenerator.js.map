{"version":3,"file":"dataGenertorgenerator.js","sourceRoot":"","sources":["../../../../mock/mock_prod/src/dataGenertorgenerator.ts"],"names":[],"mappings":";;AAAA,kFAA+E;AAC/E,6EAA0E;AAC1E,+DAA+D;AAC/D,4EAAyE;AAEzE,wGAAqG;AAIrG,mBAA2B,SAAQ,uBAAU;IAS3C;QACE,KAAK,CAAC,oCAAkB,CAAC,CAAC;QAC1B,IAAI,CAAC,IAAI,EAAE,CAAC;IACd,CAAC;IAED,IAAI;QACF,IAAI,CAAC,WAAW,GAAG,IAAI,qCAAiB,EAAE,CAAC;QAC3C,IAAI,CAAC,iBAAiB,GAAG,IAAI,iDAAuB,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC;QAC/E,IAAI,CAAC,QAAQ,GAAG,IAAI,mBAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,YAAY,EAAE,IAAI,CAAC,iBAAiB,CAAC,CAAC;QAC/E,IAAI,CAAC,QAAQ,CAAC,QAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,EAAE;YACvC,IAAI,KAAK,GAAG,OAAO,IAAI,SAAS;gBAC9B,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC7B,CAAC,CAAC,CAAC;IAEL,CAAC;IAED,iBAAiB;QACf,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,WAAW,CAAC,gBAAgB,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;QAC9D,IAAI,CAAC,QAAQ,CAAC,eAAe,CAAC,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,sBAAsB,EAAE,IAAI,CAAC,MAAM,CAAC,YAAY,CAAC,mBAAmB,CAAC;aACpI,KAAK,CAAC,GAAG,EAAE;YACV,IAAI,CAAC,WAAW,CAAC,kBAAkB,EAAE,CAAC;YACtC,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAC;IACT,CAAC;CAGF;AAnCD,sCAmCC","sourcesContent":["import { GoldServer } from '../../../shared/src/modules/goldServer/goldServer';\nimport { MockDataGenerator } from './mockDataGeneretor/mockDataGeneretor';\nimport { configFileLocation } from '../config/config.filePath';\nimport { Producer } from '../../../shared/src/modules/producer/producer';\nimport { Observable } from 'rxjs/index';\nimport { RabbitConnectionManager } from '../../../shared/src/modules/rabbit/rabbitConnectionManager';\nimport { EventEmitter } from 'events';\n\n\nexport class DataGenerator extends GoldServer {\n\n  private source: Observable<any>;\n  private mockDataGen: MockDataGenerator;\n  private connectionManager: RabbitConnectionManager;\n  private producer: Producer;\n  private eventListener: EventEmitter;\n\n\n  constructor() {\n    super(configFileLocation);\n    this.init();\n  }\n\n  init() {\n    this.mockDataGen = new MockDataGenerator();\n    this.connectionManager = new RabbitConnectionManager(this.config.rabbitConfig);\n    this.producer = new Producer(this.config.rabbitConfig, this.connectionManager);\n    this.producer.listener.subscribe(event => {\n      if (event = 'ready' || 'recover')\n        this.sendSourceToQueue();\n    });\n\n  }\n\n  sendSourceToQueue() {\n    this.source = this.mockDataGen.generateMockData(Infinity, 10);\n    this.producer.generateToQueue(this.source, this.config.rabbitConfig.config_rabbitQueueName, this.config.rabbitConfig.config_queueOptions)\n        .catch(() => {\n          this.mockDataGen.killSourceMockData();\n          this.sendSourceToQueue();\n        });\n  }\n\n\n}"]}