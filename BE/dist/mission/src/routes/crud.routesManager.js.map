{"version":3,"file":"crud.routesManager.js","sourceRoot":"","sources":["../../../../mission/src/routes/crud.routesManager.ts"],"names":[],"mappings":"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","sourcesContent":["import { CrudMethod } from \"../dbModule/methods/crud.method\";\r\nimport { LogService } from \"../logs/logHandler\";\r\n\r\n\r\nexport class CrudRoutesManager {\r\n  crudMethods: CrudMethod;\r\n  logService: LogService;\r\n  entityName: string;\r\n\r\n  constructor(entityMethods, entityName, logService) {\r\n    this.crudMethods = entityMethods;\r\n    this.entityName = entityName;\r\n    this.logService = logService || {\r\n      log : (log) => console.log(log),\r\n      error : (err) => console.log(err)\r\n    };\r\n  }\r\n\r\n  test(req, res) {\r\n    return res.status(200).send(\"hello\");\r\n  }\r\n\r\n  getById(req, res) {\r\n    this.crudMethods.get(req.query[this.entityName + \"Id\"])\r\n        .then(entity => res.status(200).send(entity))\r\n        .catch(err => {\r\n          this.logService.error(err);\r\n          res.status(500).send(err);\r\n        })\r\n    ;\r\n  }\r\n\r\n  add(req, res) {\r\n    this.crudMethods.add(req.body[this.entityName])\r\n        .then(entity => res.status(200).send(entity))\r\n        .catch(err => {\r\n          this.logService.error(err);\r\n          res.status(500).send(err);\r\n        })\r\n  }\r\n\r\n  getAll(req, res) {\r\n    this.crudMethods.getAll()\r\n        .then(entities => res.status(200).send(entities))\r\n        .catch(err => {\r\n          this.logService.error(err);\r\n          res.status(500).send(err);\r\n        })\r\n  }\r\n\r\n  update(req, res) {\r\n    this.crudMethods.update(req.body[this.entityName])\r\n        .then(entity => res.status(200).send(entity))\r\n        .catch(err => {\r\n          this.logService.error(err);\r\n          res.status(500).send(err);\r\n        })\r\n\r\n  }\r\n\r\n  updateField(req, res) {\r\n    this.crudMethods.updateField(req.body[\"id\"], req.body[this.entityName])\r\n        .then(entity => res.status(200).send(entity))\r\n        .catch(err => {\r\n          this.logService.error(err);\r\n          res.status(500).send(err);\r\n        })\r\n\r\n  }\r\n  remove(req, res) {\r\n    this.crudMethods.remove(req.body[\"id\"])\r\n        .then(entity => res.status(200).send(entity))\r\n        .catch(err => {\r\n          this.logService.error(err);\r\n          res.status(500).send(err);\r\n        })\r\n\r\n  }\r\n\r\n\r\n}"]}